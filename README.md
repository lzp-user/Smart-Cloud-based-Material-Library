权限与架构设计

    权限管理：基于 Sa-Token 的 Kit 模式构建多账号 RBAC 体系，通过请求上下文参数实现统一权限校验逻辑，利用注解合并简化鉴权注解，实现方法级细粒度权限控制。
    项目初始化：通过 Spring Initializr 快速搭建项目，整合 MyBatis Plus、Hutool、Knife4j、Lombok 等主流依赖，提升开发效率。
    数据层优化：引入 MyBatis Plus 实现 Mapper 自动扫描，结合 BaseMapper 与自定义分页拦截器，大幅减少 CRUD 样板代码，提升开发效率。

基础功能实现

    异常处理：封装自定义异常类与统一错误码枚举，基于 @RestControllerAdvice 开发全局异常处理器，增强系统稳定性与可维护性。
    响应规范：设计标准化响应封装类及工具方法，实现接口返回数据格式统一，降低前后端交互成本。
    跨域配置：通过 WebMvcConfigurer 实现全局 CORS 配置，精准控制可信源，解决前后端跨域请求问题。
    精度保障：自定义 Jackson 配置，将 Long 类型序列化为字符串，避免前端 JS 精度限制导致的数据不一致问题。

数据库与查询优化

    动态查询：利用 MyBatis Plus 的 LambdaQueryWrapper 与 SqlRunner 构造动态 SQL，简化复杂查询逻辑，提升数据库操作灵活性。
    库表设计：设计用户、图片、空间、空间成员核心表，图片标签以 JSON 数组存储；为空间成员关联表添加联合索引，提升检索性能。
    文档管理：集成 Knife4j 自动生成接口文档，结合 ApiOperation 注解规范注释，减少人工维护成本，增强接口可读性。

安全与会话管理

    密码安全：用户注册采用 MD5 + 盐值加密策略存储密码，从源头防范明文泄露风险。
    登录态管理：整合 Redis 与 SpringSession 实现分布式会话存储，支持跨服务器用户身份识别与状态保持。
    权限切面：基于自定义权限注解与 SpringAOP 环绕切面，实现用户与管理员角色的统一权限校验逻辑。

图片存储与处理

    对象存储：封装 COS 通用文件服务，集成数据万象自动解析图片元信息（宽高 / 格式 / 大小），提升检索效率。
    审核机制：设计分级审核策略，管理员上传图片自动通过并记录审计日志（时间 / 审核人 ID），确保操作可追溯。
    URL 传图：使用 Hutool 通过 Head 请求校验 URL 有效性后下载图片，降低无效请求带宽消耗与数据异常风险。
    设计模式：运用模板方法模式统一本地 / URL 图片上传流程（校验→下载→上传→释放），增强代码复用与可维护性。

性能与批量操作

    批量处理：基于 Jsoup 抓取 Bing 图片，结合 CompletableFuture 实现批量上传与入库，性能提升 300%。
    缓存优化：采用 Redis+Caffeine 多级缓存存储热门图片数据，接口响应耗时降低 400%，通过随机过期时间防范缓存雪崩。
    加载优化：上传阶段利用数据万象实现 Webp 转码压缩与缩略图生成，结合 CDN 加速，提升页面加载速度并降低流量成本。
    存储优化：通过对象存储数据沉降策略（30 天未访问自动降频）与定时清理任务，显著降低存储成本。
    上传优化：实现 MD5 秒传校验与 COS 分片上传 / 断点续传，提升大文件传输效率与稳定性。

业务逻辑与扩展

    空间创建：基于分段锁与 TransactionTemplate 编程式事务，限制单用户最多创建 1 个私有空间，确保业务原子性。
    额度控制：通过编程式事务管理空间存储额度占用，结合限流与预校验机制，防止超量上传导致的资源滥用。
    多维搜索：封装 MyBatis Plus 通用查询方法，支持关键词、标签、分类、时间范围等多条件组合搜索。
    以图搜图：集成百度图像识别 API，通过 Jsoup+HttpClient 调用服务，运用门面模式简化客户端调用复杂度。
    颜色检索：利用数据万象提取图片主色调存储，通过欧氏距离计算颜色相似度，结合 StreamAPI 实现精准排序。
    批量操作：通过 @Transactional 注解保障批量编辑原子性，使用 ThreadPoolExecutor + 数据库批处理提升操作性能。
    AI 服务：封装阿里云百炼大模型 AI 绘图接口，支持异步任务轮询与统一错误码，提升服务稳定性。
    数据统计：运用 MyBatis Plus 的 groupBy 与 selectObjs 实现聚合统计，按需选择字段以优化查询性能与内存占用。
    成员管理：设计 space_user 关联表存储成员角色，添加唯一联合索引防止重复加入，提升查询效率与数据唯一性。



